# TGFT
TGFT — Twitch Giveaway For Time

Бот для отслеживания времени просмотра и проведения розыгрышей на Twitch.

## Настройка

1. Заполните `config.json`:
   - `client_id` - ID приложения Twitch
   - `oauth_token` - OAuth токен бота
   - `channel` - название канала

   https://twitchio.dev/en/stable/getting-started/quickstart.html
   https://dev.twitch.tv/console/extensions/
   https://twitchtokengenerator.com

2. Запуск через Docker:
```bash
docker-compose up -d
```

## Команды

Все команды настраиваются в `config.json` без символа `!`

### Админские команды:
- `!newstream` - сброс времени для нового стрима
- `!giveaway <ключ>` - открыть прием заявок на розыгрыш
- `!endgiveaway` - закрыть прием заявок активного розыгрыша
- `!pick <ключ>` - выбрать случайного победителя
- `!participants [ключ]` - показать количество участников (текущего или по ключу)
- `!current` - показать активный розыгрыш

### Пользовательские команды:
- `!join` - участвовать в активном розыгрыше
- `!time` - проверить время просмотра текущего стрима

## Логика работы

1. При начале нового стрима: `!newstream` (сбрасывает время всех)
2. Открытие розыгрыша: `!giveaway ключ1` (только один активный)
3. Пользователи участвуют: `!join` (в активном розыгрыше)
4. Закрытие приема: `!endgiveaway`
5. Выбор победителя: `!pick ключ1`

Может быть только один активный розыгрыш, но он привязан к ключу для выбора победителя.
